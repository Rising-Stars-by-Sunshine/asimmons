# -*- coding: utf-8 -*-
"""Stag Hunt Without Incentives to Cooperate

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/12dCrRtxmga6TQ8EvvPmiKeJsZa0YJtPY

<font size = 6>Nashpy VS quantecon</font>
"""

# install the tools you will use later
!pip install --upgrade setuptools
!pip install --upgrade pip
!pip install nashpy
!pip install quantecon

"""<font face = Times size=4>

***Nashpy and QuantEcon:***

Previously, we have used Nashpy many times to solve for the Nash equillibrium.Nashpy is a powerful Python library which is widely used in solving game theory problems.

Now, we are going to introduce a new Python package called QuantEcon. QuantEcon is a NumFOCUS fiscally sponsored project dedicated to development and documentation of modern open source computational tools for economics, econometrics, and decision making. They provide a tool called QuanEcon.py which enables us to access to the service they provide easily with Python code.

In the following part, we will review the usage of Nashpy and then give instructions of how to use QuantEcon for solving game theory problems.
    
</font>

---

<font face = Times size = 4>
    
***Example - Battle of sex:***

</font>

<div align="center">
<img src="data:image/png;base64,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" width="40%"/>
    </div>
<font face = Times size = 3>
    <center> Fig: Battle of sex </center>
    </font>

<font face = Times size = 4>
    
***Question:*** What is the equilibrium strategy profile?

</font>

<font face = Times size=4>

***Using Nashpy:***
    
</font>
"""

import nashpy as nash
import numpy as np

# Creater the game with the payoff matrix

A = np.array([[3.5, 3.5],
              [0.5, 4]]) # A is the row player (in this case, stage and hare)

B = np.array([[4, 2.5],
              [1, 3]]) # B is the column player

# Form the game
game2 = nash.Game(A,B)
game2

# Find the Nash Equilibrium with Support Enumeration
equilibria = game2.support_enumeration()
for eq in equilibria:
    print(eq)

"""<font face = Times size = 4>

***Interpretation of the results:***
    
In the output of Nashpy, each tuple represents a strategy set. The first two tuples represent the pure strategy NE, which are TOP LEFT and BOTTOM RIGHT. The third tuple shows the mixed strategy NE.
    
</font>

<font face = Times size = 4>

***Using QuantEcon:***
    
</font>

<font face = Times size = 4>

***Form the game:*** In the following part, three ways to form a game will be shown.
    
</font>
"""

# import the QuantEcon package
import quantecon.game_theory as gt
import numpy as np

# The first way to form the game: by the payoff matrix
prisoner_dilemma_matrix = np.array([[(2, 1), (0, 0)],
                                    [(0, 0), (1, 2)]])

g_PD = gt.NormalFormGame(prisoner_dilemma_matrix)
print(g_PD)

# The second way to form the game: by players
player0 = gt.Player([[2, 0],
                     [0, 1]])

# Please pay attention to the difference here!!!
player1 = gt.Player([[1, 0],
                     [0, 2]])

# Pass in the two players
g_PD = gt.NormalFormGame((player0, player1))
print(g_PD)

# the third way to form the game: by actions (Not recommanded)

# 2 players, each of whom has 2 actions
g_PD = gt.NormalFormGame((2, 2))
g_PD[0, 0] = 2, 1
g_PD[0, 1] = 0, 0
g_PD[1, 0] = 0, 0
g_PD[1, 1] = 1, 2

print(g_PD)

"""<font face = Times size = 4>

***Short Summay:***
    
There are three ways to form a game using QuantEcon. Personally I will recommand you to use the first way (directly pass in the payoff matrix). This is the most intuitive way. Also, if you used to use Nashpy, the logic of forming a game by Nashpy and by QuantEcon are different, please pay attention to that.

</font>

<font face = Times size = 4>

***Find the Nash equilibrium:***
    
In the following part, we will introduce three simple function to find the Nash equilibrium.

    
</font>
"""

# Finding the Nash equilibrium: pure_nash_brute

NE = gt.pure_nash_brute(g_PD)
print(NE)

# Finding the Nash equilibrium: support_enumeration

NE = gt.support_enumeration(g_PD)
print(NE)

NE = gt.vertex_enumeration(g_PD)
print(NE)

"""<font face = Times size = 4>

***Short Summay:***
    
We introduced three way to solve for the Nash equilibrium. Pure_nash_brute is able to return the pure strategy NE. Support_enumeration and vertex_enumeration both computes mixed-action Nash equilibria of a 2-player normal form game by enumeration and matching of vertices of the best response polytopes, but the latter seems to run faster than the former.

</font>
"""

